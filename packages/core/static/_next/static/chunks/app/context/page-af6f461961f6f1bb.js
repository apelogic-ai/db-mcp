(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[810],{9817:function(e,t,n){Promise.resolve().then(n.bind(n,8866))},8866:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return S}});var r=n(7437),s=n(2265),a=n(8999),i=n(2832),l=n(3448);let o=e=>{let{className:t}=e;return(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:(0,r.jsx)("path",{d:"m9 18 6-6-6-6"})})},c=e=>{let{className:t}=e;return(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:(0,r.jsx)("path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z"})})},d=e=>{let{className:t}=e;return(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[(0,r.jsx)("path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z"}),(0,r.jsx)("path",{d:"M14 2v4a2 2 0 0 0 2 2h4"})]})},u=e=>{let{className:t}=e;return(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[(0,r.jsx)("ellipse",{cx:"12",cy:"5",rx:"9",ry:"3"}),(0,r.jsx)("path",{d:"M3 5V19A9 3 0 0 0 21 19V5"}),(0,r.jsx)("path",{d:"M3 12A9 3 0 0 0 21 12"})]})},x=e=>{let{className:t}=e;return(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[(0,r.jsx)("circle",{cx:"12",cy:"12",r:"3"}),(0,r.jsx)("line",{x1:"3",x2:"9",y1:"12",y2:"12"}),(0,r.jsx)("line",{x1:"15",x2:"21",y1:"12",y2:"12"})]})};function m(e){let{connections:t,selectedFile:n,expandedConnections:s,expandedFolders:a,onSelectFile:i,onToggleConnection:m,onToggleFolder:g}=e,f=(e,t)=>(null==n?void 0:n.connection)===e&&(null==n?void 0:n.path)===t;return(0,r.jsx)("div",{className:"text-sm",children:0===t.length?(0,r.jsxs)("div",{className:"p-4 text-gray-500 text-center",children:["No connections configured.",(0,r.jsx)("br",{}),(0,r.jsx)("span",{className:"text-xs",children:"Add a connection in the Connectors page."})]}):t.map(e=>{let t=s.has(e.name);return(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:(0,l.cn)("flex items-center gap-1 px-2 py-1.5 cursor-pointer hover:bg-gray-800 rounded",e.isActive&&"bg-green-950/30"),onClick:()=>m(e.name),children:[(0,r.jsx)(o,{className:(0,l.cn)("text-gray-500 transition-transform",t&&"rotate-90")}),(0,r.jsx)(u,{className:(0,l.cn)("text-gray-400",e.isActive&&"text-green-500")}),(0,r.jsx)("span",{className:(0,l.cn)("text-gray-300 flex-1",e.isActive&&"text-white font-medium"),children:e.name}),e.gitEnabled&&(0,r.jsx)("span",{title:"Git enabled",children:(0,r.jsx)(x,{className:"text-orange-500"})})]}),t&&(0,r.jsxs)("div",{className:"ml-4",children:[e.folders.map(t=>{let n="".concat(e.name,"/").concat(t.name),s=a.has(n);return(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:(0,l.cn)("flex items-center gap-1 px-2 py-1 rounded",!t.isEmpty&&"cursor-pointer hover:bg-gray-800",t.isEmpty&&"cursor-default"),onClick:()=>{t.isEmpty||g(n)},children:[(0,r.jsx)(o,{className:(0,l.cn)("text-gray-500 transition-transform",s&&"rotate-90",t.isEmpty&&"invisible")}),(0,r.jsx)(c,{className:(0,l.cn)("text-yellow-600",t.isEmpty&&"text-gray-600")}),(0,r.jsxs)("span",{className:(0,l.cn)("text-gray-400",t.isEmpty&&"text-gray-600 italic"),children:[t.name,t.isEmpty&&" (empty)"]})]}),s&&!t.isEmpty&&(0,r.jsx)("div",{className:"ml-4",children:t.files.map(t=>{let n=f(e.name,t.path);return(0,r.jsxs)("div",{className:(0,l.cn)("flex items-center gap-1 px-2 py-1 cursor-pointer hover:bg-gray-800 rounded",n&&"bg-blue-900/50"),onClick:()=>i(e.name,t.path),children:[(0,r.jsx)("span",{className:"w-4"})," ",(0,r.jsx)(d,{className:(0,l.cn)("text-gray-500",t.name.endsWith(".yaml")||t.name.endsWith(".yml")?"text-purple-400":"text-blue-400")}),(0,r.jsx)("span",{className:(0,l.cn)("text-gray-400",n&&"text-white"),children:t.name}),void 0!==t.size&&(0,r.jsx)("span",{className:"text-gray-600 text-xs ml-auto",children:h(t.size)})]},t.path)})})]},n)}),e.rootFiles&&e.rootFiles.length>0&&(0,r.jsx)(r.Fragment,{children:e.rootFiles.map(t=>{let n=f(e.name,t.path);return(0,r.jsxs)("div",{className:(0,l.cn)("flex items-center gap-1 px-2 py-1 cursor-pointer hover:bg-gray-800 rounded",n&&"bg-blue-900/50"),onClick:()=>i(e.name,t.path),children:[(0,r.jsx)("span",{className:"w-4"})," ",(0,r.jsx)(d,{className:(0,l.cn)("text-gray-500",t.name.endsWith(".yaml")||t.name.endsWith(".yml")?"text-purple-400":"text-blue-400")}),(0,r.jsx)("span",{className:(0,l.cn)("text-gray-400",n&&"text-white"),children:t.name}),void 0!==t.size&&(0,r.jsx)("span",{className:"text-gray-600 text-xs ml-auto",children:h(t.size)})]},t.path)})})]})]},e.name)})})}function h(e){return e<1024?"".concat(e,"B"):e<1048576?"".concat((e/1024).toFixed(1),"KB"):"".concat((e/1048576).toFixed(1),"MB")}var g=n(2512),f=n.n(g),v=n(1747),p=n.n(v);n(7049),n(4952),n(8151);var y=n(2381);let w=e=>{let{className:t}=e;return(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[(0,r.jsx)("path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z"}),(0,r.jsx)("path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7"}),(0,r.jsx)("path",{d:"M7 3v4a1 1 0 0 0 1 1h7"})]})},j=e=>{let{className:t}=e;return(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[(0,r.jsx)("path",{d:"M3 7v6h6"}),(0,r.jsx)("path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13"})]})},b=e=>{let{className:t}=e;return(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[(0,r.jsx)("path",{d:"M3 6h18"}),(0,r.jsx)("path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"}),(0,r.jsx)("path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"})]})},N=e=>{let{className:t}=e;return(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[(0,r.jsx)("path",{d:"M5 12h14"}),(0,r.jsx)("path",{d:"M12 5v14"})]})};function k(e){let{connection:t,path:n,content:a,isStockReadme:i,isLoading:o,isDirty:c,gitEnabled:d,onContentChange:u,onSave:x,onDiscard:m,onDelete:h,onCreateFile:g}=e,[v,k]=(0,s.useState)(!1),[C,S]=(0,s.useState)(!1),E=(0,s.useCallback)(e=>e?e.endsWith(".yaml")||e.endsWith(".yml")?"yaml":(e.endsWith(".md"),"markdown"):"markdown",[])(n),L=(0,s.useCallback)(e=>{let t="yaml"===E?p().languages.yaml:p().languages.markdown;return p().highlight(e,t,E)},[E]),F=async()=>{k(!0);try{await x()}finally{k(!1)}},z=async()=>{if(confirm('Delete "'.concat(n,'"? ').concat(d?"This will be committed to git.":"File will be moved to .trash folder."))){S(!0);try{await h()}finally{S(!1)}}};(0,s.useEffect)(()=>{let e=e=>{(e.metaKey||e.ctrlKey)&&"s"===e.key&&(e.preventDefault(),c&&!v&&F())};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[c,v]);let M=n&&/\.(yaml|yml|md)$/i.test(n);return t&&n&&M?(0,r.jsxs)("div",{className:"h-full flex flex-col",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between px-3 py-2 border-b border-gray-800 bg-gray-900/50",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsxs)("span",{className:"text-gray-400 text-sm font-mono",children:[t,"/",n]}),c&&(0,r.jsx)("span",{className:"text-yellow-500 text-xs",children:"(unsaved)"}),i&&(0,r.jsx)("span",{className:"text-blue-400 text-xs",children:"(template)"}),d&&(0,r.jsx)("span",{className:"text-orange-500 text-xs",title:"Git enabled",children:"git"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[!i&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(y.z,{variant:"outline",size:"sm",onClick:F,disabled:!c||v||o,className:(0,l.cn)("text-xs border-gray-700 bg-gray-900 hover:bg-gray-800",c?"text-green-400 border-green-800":"text-gray-500"),children:[(0,r.jsx)(w,{className:"mr-1"}),v?"Saving...":"Save"]}),(0,r.jsxs)(y.z,{variant:"outline",size:"sm",onClick:m,disabled:!c||o,className:"text-xs border-gray-700 bg-gray-900 hover:bg-gray-800 text-gray-400",children:[(0,r.jsx)(j,{className:"mr-1"}),"Discard"]}),(0,r.jsxs)(y.z,{variant:"outline",size:"sm",onClick:z,disabled:C||o,className:"text-xs border-red-800 bg-gray-900 text-red-400 hover:bg-red-950",children:[(0,r.jsx)(b,{className:"mr-1"}),C?"Deleting...":"Delete"]})]}),i&&(0,r.jsxs)(y.z,{variant:"outline",size:"sm",onClick:g,className:"text-xs border-green-800 bg-gray-900 text-green-400 hover:bg-green-950",children:[(0,r.jsx)(N,{className:"mr-1"}),"Create File"]})]})]}),(0,r.jsx)("div",{className:"flex-1 overflow-auto",children:o?(0,r.jsx)("div",{className:"h-full flex items-center justify-center text-gray-500",children:"Loading..."}):(0,r.jsx)(f(),{value:a,onValueChange:u,highlight:L,padding:16,disabled:i,className:"min-h-full font-mono text-sm",style:{backgroundColor:"#1a1a1a",color:"#e0e0e0",minHeight:"100%"},textareaClassName:"outline-none"})})]}):(0,r.jsx)("div",{className:"h-full flex items-center justify-center text-gray-500",children:(0,r.jsx)("div",{className:"text-center",children:(0,r.jsx)("p",{children:"Select a file from the tree to view or edit."})})})}var C=n(279);function S(){var e;let{isInitialized:t,call:n}=(0,a.n)(),{connections:l,setConnections:o,selectedFile:c,setSelectedFile:d,content:u,setContent:x,originalContent:h,setOriginalContent:g,isStockReadme:f,setIsStockReadme:v,expandedConnections:p,toggleConnection:w,expandedFolders:j,toggleFolder:b,treeWidth:N,setTreeWidth:S,isDirty:E}=(0,i.d)(),[L,F]=(0,s.useState)(!1),[z,M]=(0,s.useState)(null),[B,W]=(0,s.useState)(!1),[D,V]=(0,s.useState)(null),[P,A]=(0,s.useState)(!1),[_,I]=(0,s.useState)(null),[R,T]=(0,s.useState)(""),[H,K]=(0,s.useState)(!1),O=(0,s.useRef)(!1),$=(0,s.useRef)(null),G=c&&(null===(e=l.find(e=>e.name===c.connection))||void 0===e?void 0:e.gitEnabled),Z=(0,s.useCallback)(async()=>{if(t){F(!0),M(null);try{let e=await n("context/tree",{});o(e.connections)}catch(e){M(e instanceof Error?e.message:"Failed to fetch context tree")}finally{F(!1)}}},[t,n]),J=(0,s.useCallback)(async(e,t)=>{if(!/\.(yaml|yml|md)$/i.test(t)){d(null),x(""),g("");return}W(!0),V(null);try{let a=await n("context/read",{connection:e,path:t});if(a.success)x(a.content||""),g(a.content||""),v(a.isStockReadme||!1);else{var r,s;d(null),x(""),g(""),(null===(r=a.error)||void 0===r?void 0:r.includes("File not found"))||(null===(s=a.error)||void 0===s?void 0:s.includes("File type not allowed"))||V(a.error||"Failed to read file")}}catch(e){d(null),x(""),g(""),V(e instanceof Error?e.message:"Failed to read file")}finally{W(!1)}},[n,d,x,g]);(0,s.useEffect)(()=>{Z()},[Z]);let X=c&&/\.(yaml|yml|md)$/i.test(c.path);(0,s.useEffect)(()=>{c&&!X&&(d(null),x(""),g(""),V(null))},[c,X,d,x,g]);let Y=async()=>{if(c)try{let e=await n("context/write",{connection:c.connection,path:c.path,content:u});e.success?(g(u),Z()):V(e.error||"Failed to save file")}catch(e){V(e instanceof Error?e.message:"Failed to save file")}},q=async()=>{if(c)try{let e=await n("context/delete",{connection:c.connection,path:c.path});e.success?(d(null),x(""),g(""),Z()):V(e.error||"Failed to delete file")}catch(e){V(e instanceof Error?e.message:"Failed to delete file")}},Q=async()=>{if(_&&R.trim()){K(!0);try{let e="".concat(_.folder,"/").concat(R.trim()),t=await n("context/create",{connection:_.connection,path:e,content:""});t.success?(A(!1),T(""),d({connection:_.connection,path:e}),x(""),g(""),v(!1),Z()):V(t.error||"Failed to create file")}catch(e){V(e instanceof Error?e.message:"Failed to create file")}finally{K(!1)}}};return(0,s.useEffect)(()=>{let e=e=>{if(!O.current||!$.current)return;e.preventDefault();let t=$.current.getBoundingClientRect();S(Math.max(180,Math.min(600,e.clientX-t.left)))},t=()=>{O.current&&(O.current=!1,document.body.style.cursor="",document.body.style.userSelect="")};return document.addEventListener("mousemove",e),document.addEventListener("mouseup",t),()=>{document.removeEventListener("mousemove",e),document.removeEventListener("mouseup",t)}},[S]),(0,r.jsxs)("div",{className:"h-[calc(100vh-120px)] flex flex-col",children:[(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-white",children:"Context Viewer"}),(0,r.jsx)("p",{className:"text-gray-400 mt-1",children:"Browse and edit schema descriptions, domain models, and training examples"})]}),(z||D&&c&&/\.(yaml|yml|md)$/i.test(c.path))&&(0,r.jsx)("div",{className:"mb-4 p-3 bg-red-950 border border-red-800 rounded text-red-300 text-sm",children:z||D}),(0,r.jsxs)("div",{ref:$,className:"flex-1 flex border border-gray-800 rounded-lg overflow-hidden bg-gray-900",children:[(0,r.jsxs)("div",{className:"border-r border-gray-800 overflow-auto bg-gray-950",style:{width:N,minWidth:N},children:[(0,r.jsxs)("div",{className:"p-2 border-b border-gray-800 flex items-center justify-between",children:[(0,r.jsx)("span",{className:"text-xs text-gray-500 uppercase tracking-wider",children:"Connections"}),(0,r.jsx)("button",{onClick:Z,disabled:L,className:"text-gray-500 hover:text-gray-300 disabled:opacity-50",title:"Refresh",children:(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:L?"animate-spin":"",children:[(0,r.jsx)("path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8"}),(0,r.jsx)("path",{d:"M21 3v5h-5"})]})})]}),(0,r.jsx)(m,{connections:l,selectedFile:c,expandedConnections:p,expandedFolders:j,onSelectFile:(e,t)=>{(u===h||confirm("You have unsaved changes. Discard them?"))&&(d({connection:e,path:t}),v(!1),J(e,t))},onToggleConnection:w,onToggleFolder:b})]}),(0,r.jsx)("div",{className:"w-1 bg-gray-800 hover:bg-blue-600 cursor-col-resize transition-colors",onMouseDown:e=>{e.preventDefault(),O.current=!0,document.body.style.cursor="col-resize",document.body.style.userSelect="none"}}),(0,r.jsx)("div",{className:"flex-1 overflow-hidden",children:(0,r.jsx)(k,{connection:(null==c?void 0:c.connection)||null,path:(null==c?void 0:c.path)||null,content:u,isStockReadme:f,isLoading:B,isDirty:E,gitEnabled:null!=G&&G,onContentChange:x,onSave:Y,onDiscard:()=>{x(h)},onDelete:q,onCreateFile:()=>{if(!c)return;let e=c.path;I({connection:c.connection,folder:e}),T("training"===e?"examples.yaml":"notes.md"),A(!0)}})})]}),P&&_&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:(0,r.jsxs)("div",{className:"bg-gray-900 border border-gray-800 rounded-lg p-6 w-96",children:[(0,r.jsx)("h3",{className:"text-white font-medium mb-4",children:"Create New File"}),(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("label",{className:"text-sm text-gray-400 block mb-1",children:"File name"}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsxs)("span",{className:"text-gray-500 text-sm",children:[_.folder,"/"]}),(0,r.jsx)(C.I,{value:R,onChange:e=>T(e.target.value),placeholder:"filename.yaml",className:"flex-1 bg-gray-950 border-gray-700 text-white",autoFocus:!0,onKeyDown:e=>{"Enter"===e.key&&Q(),"Escape"===e.key&&A(!1)}})]}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Allowed: .yaml, .yml, .md"})]}),(0,r.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,r.jsx)(y.z,{variant:"outline",size:"sm",onClick:()=>A(!1),className:"border-gray-700 bg-gray-900 hover:bg-gray-800 text-gray-300",children:"Cancel"}),(0,r.jsx)(y.z,{size:"sm",onClick:Q,disabled:H||!R.trim(),className:"bg-green-600 hover:bg-green-700 text-white",children:H?"Creating...":"Create"})]})]})})]})}},2381:function(e,t,n){"use strict";n.d(t,{z:function(){return c}});var r=n(7437),s=n(2265),a=n(5293),i=n(535),l=n(3448);let o=(0,i.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),c=s.forwardRef((e,t)=>{let{className:n,variant:s,size:i,asChild:c=!1,...d}=e,u=c?a.g7:"button";return(0,r.jsx)(u,{className:(0,l.cn)(o({variant:s,size:i,className:n})),ref:t,...d})});c.displayName="Button"},279:function(e,t,n){"use strict";n.d(t,{I:function(){return i}});var r=n(7437),s=n(2265),a=n(3448);let i=s.forwardRef((e,t)=>{let{className:n,type:s,...i}=e;return(0,r.jsx)("input",{type:s,className:(0,a.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",n),ref:t,...i})});i.displayName="Input"},8999:function(e,t,n){"use strict";n.d(t,{D:function(){return l},n:function(){return o}});var r=n(7437),s=n(2265);let a=(0,s.createContext)(null),i=0;function l(e){let{children:t,baseUrl:n="/bicp",autoConnect:l=!0}=e,[o,c]=(0,s.useState)(!1),[d,u]=(0,s.useState)(!1),[x,m]=(0,s.useState)(null),[h,g]=(0,s.useState)(null),f=(0,s.useCallback)(async(e,t)=>{let r={jsonrpc:"2.0",method:e,params:t,id:++i},s=await fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!s.ok)throw Error("HTTP error: ".concat(s.status," ").concat(s.statusText));let a=await s.json();if(a.error)throw Error("BICP error ".concat(a.error.code,": ").concat(a.error.message));return a.result},[n]),v=(0,s.useCallback)(async()=>{if(!d){u(!0),m(null);try{let e=await f("initialize",{protocolVersion:"0.1.0",clientInfo:{name:"db-mcp-ui",version:"0.1.0"},capabilities:{streaming:!0,candidateSelection:!0,semanticSearch:!0,refinement:!0}});g(e.serverInfo),c(!0)}catch(e){m(e instanceof Error?e:Error(String(e))),c(!1)}finally{u(!1)}}},[f,d]);return(0,s.useEffect)(()=>{!l||o||d||v()},[l,o,d,v]),(0,r.jsx)(a.Provider,{value:{isInitialized:o,isLoading:d,error:x,serverInfo:h,initialize:v,call:f},children:t})}function o(){let e=(0,s.useContext)(a);if(!e)throw Error("useBICP must be used within a BICPProvider");return e}},2832:function(e,t,n){"use strict";n.d(t,{d:function(){return l},v:function(){return i}});var r=n(7437),s=n(2265);let a=(0,s.createContext)(null);function i(e){let{children:t}=e,[n,i]=(0,s.useState)([]),[l,o]=(0,s.useState)(null),[c,d]=(0,s.useState)(""),[u,x]=(0,s.useState)(""),[m,h]=(0,s.useState)(!1),[g,f]=(0,s.useState)(new Set),[v,p]=(0,s.useState)(new Set),[y,w]=(0,s.useState)(280),j=(0,s.useCallback)(e=>{f(t=>{let n=new Set(t);return n.has(e)?n.delete(e):n.add(e),n})},[]),b=(0,s.useCallback)(e=>{p(t=>{let n=new Set(t);return n.has(e)?n.delete(e):n.add(e),n})},[]);return(0,r.jsx)(a.Provider,{value:{connections:n,setConnections:i,selectedFile:l,setSelectedFile:o,content:c,setContent:d,originalContent:u,setOriginalContent:x,isStockReadme:m,setIsStockReadme:h,expandedConnections:g,toggleConnection:j,expandedFolders:v,toggleFolder:b,treeWidth:y,setTreeWidth:w,isDirty:c!==u},children:t})}function l(){let e=(0,s.useContext)(a);if(!e)throw Error("useContextViewer must be used within a ContextViewerProvider");return e}},3448:function(e,t,n){"use strict";n.d(t,{cn:function(){return a}});var r=n(1994),s=n(3335);function a(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,s.m6)((0,r.W)(t))}}},function(e){e.O(0,[52,137,811,971,117,744],function(){return e(e.s=9817)}),_N_E=e.O()}]);