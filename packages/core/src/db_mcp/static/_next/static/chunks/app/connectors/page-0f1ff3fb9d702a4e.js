(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[595],{9797:function(e,t,r){Promise.resolve().then(r.bind(r,9029))},9029:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return P}});var n=r(7437),a=r(2265),s=r.t(a,2),l=r(3448);let o=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("div",{ref:t,className:(0,l.cn)("rounded-xl border bg-card text-card-foreground shadow",r),...a})});o.displayName="Card";let i=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("div",{ref:t,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",r),...a})});i.displayName="CardHeader";let c=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("div",{ref:t,className:(0,l.cn)("font-semibold leading-none tracking-tight",r),...a})});c.displayName="CardTitle";let d=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("div",{ref:t,className:(0,l.cn)("text-sm text-muted-foreground",r),...a})});d.displayName="CardDescription";let u=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("div",{ref:t,className:(0,l.cn)("p-6 pt-0",r),...a})});u.displayName="CardContent",a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("div",{ref:t,className:(0,l.cn)("flex items-center p-6 pt-0",r),...a})}).displayName="CardFooter";var g=r(1994);let f=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,m=g.W,x=(e,t)=>r=>{var n;if((null==t?void 0:t.variants)==null)return m(e,null==r?void 0:r.class,null==r?void 0:r.className);let{variants:a,defaultVariants:s}=t,l=Object.keys(a).map(e=>{let t=null==r?void 0:r[e],n=null==s?void 0:s[e];if(null===t)return null;let l=f(t)||f(n);return a[e][l]}),o=r&&Object.entries(r).reduce((e,t)=>{let[r,n]=t;return void 0===n||(e[r]=n),e},{});return m(e,l,null==t?void 0:null===(n=t.compoundVariants)||void 0===n?void 0:n.reduce((e,t)=>{let{class:r,className:n,...a}=t;return Object.entries(a).every(e=>{let[t,r]=e;return Array.isArray(r)?r.includes({...s,...o}[t]):({...s,...o})[t]===r})?[...e,r,n]:e},[]),null==r?void 0:r.class,null==r?void 0:r.className)},p=x("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function y(e){let{className:t,variant:r,...a}=e;return(0,n.jsx)("div",{className:(0,l.cn)(p({variant:r}),t),...a})}function h(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}var b=Symbol.for("react.lazy"),v=s[" use ".trim().toString()];function N(e){var t;return null!=e&&"object"==typeof e&&"$$typeof"in e&&e.$$typeof===b&&"_payload"in e&&"object"==typeof(t=e._payload)&&null!==t&&"then"in t}var j=function(e){let t=function(e){let t=a.forwardRef((e,t)=>{let{children:r,...n}=e;if(N(r)&&"function"==typeof v&&(r=v(r._payload)),a.isValidElement(r)){var s;let e,l;let o=(s=r,(e=Object.getOwnPropertyDescriptor(s.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning?s.ref:(e=Object.getOwnPropertyDescriptor(s,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning?s.props.ref:s.props.ref||s.ref),i=function(e,t){let r={...t};for(let n in t){let a=e[n],s=t[n];/^on[A-Z]/.test(n)?a&&s?r[n]=(...e)=>{let t=s(...e);return a(...e),t}:a&&(r[n]=a):"style"===n?r[n]={...a,...s}:"className"===n&&(r[n]=[a,s].filter(Boolean).join(" "))}return{...e,...r}}(n,r.props);return r.type!==a.Fragment&&(i.ref=t?function(...e){return t=>{let r=!1,n=e.map(e=>{let n=h(e,t);return r||"function"!=typeof n||(r=!0),n});if(r)return()=>{for(let t=0;t<n.length;t++){let r=n[t];"function"==typeof r?r():h(e[t],null)}}}}(t,o):o),a.cloneElement(r,i)}return a.Children.count(r)>1?a.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}(e),r=a.forwardRef((e,r)=>{let{children:s,...l}=e;N(s)&&"function"==typeof v&&(s=v(s._payload));let o=a.Children.toArray(s),i=o.find(C);if(i){let e=i.props.children,s=o.map(t=>t!==i?t:a.Children.count(e)>1?a.Children.only(null):a.isValidElement(e)?e.props.children:null);return(0,n.jsx)(t,{...l,ref:r,children:a.isValidElement(e)?a.cloneElement(e,void 0,s):null})}return(0,n.jsx)(t,{...l,ref:r,children:s})});return r.displayName=`${e}.Slot`,r}("Slot"),w=Symbol("radix.slottable");function C(e){return a.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===w}let S=x("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),k=a.forwardRef((e,t)=>{let{className:r,variant:a,size:s,asChild:o=!1,...i}=e,c=o?j:"button";return(0,n.jsx)(c,{className:(0,l.cn)(S({variant:a,size:s,className:r})),ref:t,...i})});k.displayName="Button";var E=r(8999);function P(){let{isInitialized:e,isLoading:t,error:r,serverInfo:s,initialize:l,call:g}=(0,E.n)(),[f,m]=(0,a.useState)([]),[x,p]=(0,a.useState)(!1),[h,b]=(0,a.useState)(null),[v,N]=(0,a.useState)(!1),j=(0,a.useCallback)(async()=>{p(!0),b(null);try{let e=await g("connections/list",{});m(e.connections)}catch(e){b(e instanceof Error?e.message:"Failed to fetch connections")}finally{p(!1)}},[g]);(0,a.useEffect)(()=>{e&&!v&&(N(!0),j())},[e,v,j]);let w=async e=>{try{await g("connections/switch",{name:e}),await j()}catch(e){b(e instanceof Error?e.message:"Failed to switch connection")}},C=e=>e?(0,n.jsx)(y,{className:{postgresql:"bg-blue-900 text-blue-300",clickhouse:"bg-yellow-900 text-yellow-300",trino:"bg-purple-900 text-purple-300",mysql:"bg-orange-900 text-orange-300",mssql:"bg-red-900 text-red-300",sqlite:"bg-gray-700 text-gray-300"}[e]||"bg-gray-700 text-gray-300",children:e}):null,S=e=>{if(!e)return null;let t={discovery:{label:"Discovery",color:"bg-blue-900 text-blue-300"},review:{label:"Review",color:"bg-yellow-900 text-yellow-300"},"domain-building":{label:"Building",color:"bg-purple-900 text-purple-300"},complete:{label:"Complete",color:"bg-green-900 text-green-300"}}[e]||{label:e,color:"bg-gray-700 text-gray-300"};return(0,n.jsx)(y,{className:t.color,children:t.label})};return(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{className:"text-2xl font-bold text-white",children:"Data Connectors"}),(0,n.jsx)("p",{className:"text-gray-400 mt-1",children:"Manage database and API connections"})]}),(0,n.jsxs)(o,{className:"bg-gray-900 border-gray-800",children:[(0,n.jsxs)(i,{children:[(0,n.jsxs)(c,{className:"text-white flex items-center gap-2",children:["BICP Connection",e?(0,n.jsx)(y,{className:"bg-green-900 text-green-300",children:"Connected"}):(0,n.jsx)(y,{variant:"secondary",className:"bg-gray-800 text-gray-300",children:t?"Connecting...":"Not Connected"})]}),(0,n.jsx)(d,{className:"text-gray-400",children:"Connect to the db-mcp sidecar via BICP protocol"})]}),(0,n.jsxs)(u,{className:"space-y-4",children:[r&&(0,n.jsxs)("div",{className:"p-3 bg-red-950 border border-red-800 rounded text-red-300 text-sm",children:["Error: ",r.message]}),s&&(0,n.jsxs)("div",{className:"p-3 bg-gray-950 rounded text-sm space-y-1",children:[(0,n.jsxs)("p",{className:"text-gray-300",children:[(0,n.jsx)("span",{className:"text-gray-500",children:"Server:"})," ",s.name," ","v",s.version]}),(0,n.jsxs)("p",{className:"text-gray-300",children:[(0,n.jsx)("span",{className:"text-gray-500",children:"Protocol:"})," ",s.protocolVersion]})]}),(0,n.jsx)(k,{onClick:l,disabled:t,className:"bg-blue-600 hover:bg-blue-700 text-white",children:t?"Connecting...":e?"Reconnect":"Connect to Sidecar"})]})]}),(0,n.jsxs)(o,{className:"bg-gray-900 border-gray-800",children:[(0,n.jsxs)(i,{children:[(0,n.jsxs)(c,{className:"text-white flex items-center gap-2",children:["Database Connections",x&&(0,n.jsx)(y,{variant:"secondary",className:"bg-gray-800 text-gray-300",children:"Loading..."})]}),(0,n.jsx)(d,{className:"text-gray-400",children:"Configure and manage your database connections. Connect to PostgreSQL, ClickHouse, Trino, MySQL, SQL Server, and more."})]}),(0,n.jsxs)(u,{children:[h&&(0,n.jsx)("div",{className:"p-3 bg-red-950 border border-red-800 rounded text-red-300 text-sm mb-4",children:h}),e?0!==f.length||x?(0,n.jsxs)("div",{className:"space-y-3",children:[f.map(e=>(0,n.jsxs)("div",{className:"p-4 rounded-lg border ".concat(e.isActive?"bg-gray-800 border-green-700":"bg-gray-950 border-gray-800 hover:border-gray-700"),children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[(0,n.jsx)("div",{className:"w-2 h-2 rounded-full ".concat(e.isActive?"bg-green-500":"bg-gray-600")}),(0,n.jsx)("span",{className:"text-white font-medium",children:e.name}),e.isActive&&(0,n.jsx)(y,{className:"bg-green-900 text-green-300 text-xs",children:"Active"}),C(e.dialect),S(e.onboardingPhase)]}),(0,n.jsx)("div",{className:"flex items-center gap-2",children:!e.isActive&&(0,n.jsx)(k,{variant:"outline",size:"sm",onClick:()=>w(e.name),className:"text-xs border-gray-700 hover:bg-gray-800",children:"Switch"})})]}),(0,n.jsxs)("div",{className:"mt-2 flex gap-4 text-xs text-gray-500",children:[(0,n.jsx)("span",{className:e.hasCredentials?"text-green-500":"text-gray-600",children:e.hasCredentials?"Credentials":"No credentials"}),(0,n.jsx)("span",{className:e.hasSchema?"text-green-500":"text-gray-600",children:e.hasSchema?"Schema":"No schema"}),(0,n.jsx)("span",{className:e.hasDomain?"text-green-500":"text-gray-600",children:e.hasDomain?"Domain":"No domain"})]})]},e.name)),(0,n.jsx)("div",{className:"pt-2",children:(0,n.jsx)(k,{variant:"outline",size:"sm",onClick:j,disabled:x,className:"text-xs border-gray-700 hover:bg-gray-800",children:"Refresh"})})]}):(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"text-gray-500 text-sm",children:"No connections configured yet. Use the CLI to add a connection:"}),(0,n.jsx)("code",{className:"block mt-2 p-3 bg-gray-950 rounded text-gray-300 text-sm font-mono",children:"db-mcp init my-database"})]}):(0,n.jsx)("p",{className:"text-gray-500 text-sm",children:"Connecting to BICP server..."})]})]})]})}},8999:function(e,t,r){"use strict";r.d(t,{D:function(){return o},n:function(){return i}});var n=r(7437),a=r(2265);let s=(0,a.createContext)(null),l=0;function o(e){let{children:t,baseUrl:r="/bicp",autoConnect:o=!0}=e,[i,c]=(0,a.useState)(!1),[d,u]=(0,a.useState)(!1),[g,f]=(0,a.useState)(null),[m,x]=(0,a.useState)(null),p=(0,a.useCallback)(async(e,t)=>{let n={jsonrpc:"2.0",method:e,params:t,id:++l},a=await fetch(r,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(!a.ok)throw Error("HTTP error: ".concat(a.status," ").concat(a.statusText));let s=await a.json();if(s.error)throw Error("BICP error ".concat(s.error.code,": ").concat(s.error.message));return s.result},[r]),y=(0,a.useCallback)(async()=>{if(!d){u(!0),f(null);try{let e=await p("initialize",{protocolVersion:"0.1.0",clientInfo:{name:"db-mcp-ui",version:"0.1.0"},capabilities:{streaming:!0,candidateSelection:!0,semanticSearch:!0,refinement:!0}});x(e.serverInfo),c(!0)}catch(e){f(e instanceof Error?e:Error(String(e))),c(!1)}finally{u(!1)}}},[p,d]);return(0,a.useEffect)(()=>{!o||i||d||y()},[o,i,d,y]),(0,n.jsx)(s.Provider,{value:{isInitialized:i,isLoading:d,error:g,serverInfo:m,initialize:y,call:p},children:t})}function i(){let e=(0,a.useContext)(s);if(!e)throw Error("useBICP must be used within a BICPProvider");return e}},3448:function(e,t,r){"use strict";r.d(t,{cn:function(){return s}});var n=r(1994),a=r(3335);function s(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,a.m6)((0,n.W)(t))}}},function(e){e.O(0,[137,971,117,744],function(){return e(e.s=9797)}),_N_E=e.O()}]);