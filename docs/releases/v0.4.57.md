# db-mcp v0.4.57

## Highlights

### Proactive Insights via MCP Resources

db-mcp now detects noteworthy patterns in query traces and surfaces them as MCP resources for the connected agent to analyze. This bridges the gap between the reactive MCP experience (user has to ask) and proactive analysis (system flags what matters).

**How it works:**
1. Trace analysis detects patterns (repeated queries, errors, knowledge gaps)
2. Insights are stored and exposed via `db-mcp://insights/pending` resource
3. PROTOCOL.md instructs the agent to check this resource on every session start
4. Agent mentions important insights to the user and helps resolve them
5. Resolved insights are dismissed via `dismiss_insight` tool

**What gets detected:**
- Repeated queries (3+ times) — save as examples for reuse
- High validation failure rate (>30%) — missing schema context or rules
- Unmapped business terms — vocabulary gaps needing rules
- Low example reuse — knowledge vault needs more examples
- Unsaved error patterns — learning opportunities being missed
- Stagnant knowledge vault — no captures from recent usage

**Philosophy:** The agent does the deep thinking. db-mcp just flags what's worth thinking about. No embedded LLM, no API keys, pure MCP.

### `init` as attach synonym

`db-mcp init <name> <repo>` now works when the connection already exists — it seamlessly attaches the shared repo (same as `db-mcp collab attach`).

## Breaking changes
- None

## Features
- `db-mcp://insights/pending` MCP resource for pending trace insights
- `review-insights` MCP prompt template for one-click insight review
- `dismiss_insight` tool for marking insights as resolved
- Insight detector: 6 detection categories, deterministic, no LLM calls
- PROTOCOL.md updated with insight-checking instruction (step 6)
- `db-mcp init <name> <repo>` as synonym for `collab attach` when connection exists

## Fixes
- None

## Security
- None

## Upgrade notes
- PROTOCOL.md is system-managed and will be overwritten on upgrade. The new step 6 (check insights) will be added automatically.

## Known issues
- None

## Test Coverage
- 14 new insight detector tests
- Full suite: 532 tests passing
